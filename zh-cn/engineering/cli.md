# ç”¨ one-cli å¿«é€Ÿæ­å»ºä¸€å¥—è‡ªå·±çš„ cli


æˆ‘ä»¬å¸Œæœ› [one-cli](https://github.com/developer-ones/onecli) å¯ä»¥æˆä¸ºèƒ½å¸®åŠ©ä¸­å°å›¢é˜Ÿè§£å†³å›¢é˜Ÿå·¥ç¨‹åŒ–çš„**ç¬¬ä¸€æ­¥**ï¼Œ one-cli çš„ç›®çš„æ˜¯æ–¹ä¾¿çš„å°†å·¥ç¨‹åŒ–èƒ½åŠ›ä¸­çš„ cli å·¥å…·ğŸ”§ ä»¥æ¨¡ç‰ˆçš„å½¢å¼æä¾›ç»™å¼€å‘è€…ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥å¯¹ one-cli **ç»è¿‡ç®€å•çš„ ä¿®æ”¹/æ·»åŠ æ¨¡ç‰ˆ ä¹‹åå°±å˜æˆå›¢é˜Ÿçš„ä¸“å±å·¥å…·**ã€‚

----

## å¿«é€Ÿä¸Šæ‰‹

one-cli çš„ä½¿ç”¨ç›¸å½“ç®€å•ï¼Œé¦–å…ˆå…¨å±€å®‰è£… one-cli å·¥å…· ï¼Œå¹¶ç›´æ¥æ ¹æ®éœ€è¦æ‰§è¡Œ init/create å‘½ä»¤

```
npm i @developer-ones/onecli -g

mkdir myapp && cd myapp
```

### init

é¦–å…ˆå¯¹ `one init` åŠŸèƒ½çš„å®šä¹‰æ˜¯å¼€å‘è€…ç›´æ¥ä½¿ç”¨ `init` å‘½ä»¤è¿›è¡Œé¡¹ç›®çš„åˆå§‹åŒ–ã€‚å¸Œæœ›èƒ½é€šè¿‡  `one init` å‘½ä»¤ä¿æŒå¯¹å›¢é˜Ÿåˆå§‹åŒ–æ¨¡æ¿çš„ç»Ÿä¸€å’ŒèŠ‚çœå›¢é˜Ÿæˆå‘˜å¯¹é¡¹ç›®åˆå§‹åŒ–é…ç½®çš„å¤§é‡æ—¶é—´ã€‚


```
# åœ¨å½“å‰ç›®å½•ä¸‹ç›´æ¥åˆ›å»ºæ–°é¡¹ç›®
one init
```

![one-cli init](https://cdn.dev-one.cn/one-cli%20init.png)

one-cli æä¾›çš„ `init` å‘½ä»¤ä¾èµ–äº [download-git-repo](https://www.npmjs.com/package/download-git-repo)ï¼Œ`init` ä¼šæ ¹æ®ä½¿ç”¨è€…çš„è¾“å…¥ download å¯¹åº”çš„ä»£ç ä»“åº“åˆ°æœ¬åœ°ã€‚ï¼ˆè¯·ç¡®ä¿æœ¬åœ°é…ç½®å¥½ node ç¯å¢ƒä¸ gitï¼‰

### create

`one create` åŠŸèƒ½ä¸»è¦æ˜¯åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦æ·»åŠ æ–°çš„ é¡µé¢/ç»„ä»¶/i18n æˆ–å…¶ä»–æ–°å¢æ–‡ä»¶ï¼Œä½¿ç”¨è€…å¯ä»¥é€šè¿‡ `one create` å®Œæˆå¯¹æ‰€éœ€æ¨¡å—çš„æ–°å¢

![one-cli create](https://cdn.dev-one.cn/one-cli%20create.png)

ä¸ `init` å‘½ä»¤ ä¸åŒçš„æ˜¯ï¼Œ`create` å‘½ä»¤ä¸»è¦æ˜¯ç›´æ¥åœ¨æœ¬åœ°å†™å…¥ template æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹å®Œæˆçš„ã€‚



## å¼€å‘

æˆ‘ä»¬å°† one-cli æ‰“é€ æˆä¸€æ¬¾é€šç”¨çš„ cli å·¥å…·ï¼Œç›®å‰æä¾› `init` ä¸ `create` å‘½ä»¤ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ç®€å•çš„ä¿®æ”¹å®Œæˆè‡ªå·±çš„ cli å®šåˆ¶

### ç›®å½•ç»“æ„

```
â”œâ”€â”€ bin                                 // bin ç›®å½•
â”‚Â Â  â””â”€â”€ init.js                         // æ‰§è¡Œå‘½ä»¤è¡Œ commanderï¼Œä¾‹å¦‚ one init ã€one create
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ commands                        // commands å…·ä½“å®ç°
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ create.ts                   // create åŠŸèƒ½
â”‚Â Â  â”‚Â Â  â””â”€â”€ init.ts                     // init åŠŸèƒ½
â”‚Â Â  â”œâ”€â”€ config.json                     // å¯ä»¥åœ¨è¿™é‡Œæ–°å¢ template address
â”‚Â Â  â”œâ”€â”€ template                        // template file
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tpl-component.tsx.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tpl-i18n.js.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tpl-index.less.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tpl-index.md.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tpl-index.ts.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ tpl-page.tsx.ts
â”‚Â Â  â””â”€â”€ utils
â”‚Â Â      â””â”€â”€ index.ts
```

ä»¥ `init` ä¸ºä¾‹ï¼Œå…¶ä¸»è¦åŠŸèƒ½åœ¨ /src/commands/init.ts ä¸‹, 

1. å¯ä»¥é€šè¿‡ä¿®æ”¹ question ä¸­çš„ template çš„ choices ä¸­æ–°å¢é€‰é¡¹ä½œä¸ºç”¨æˆ·åœ¨æ‰§è¡Œ init å‘½ä»¤æ˜¯äº¤äº’è¯¢é—®æ—¶å€™çš„é€‰æ‹©ã€‚
2. ä¹‹ååœ¨ /src/config.json ä¸­æ–°å¢å¯¹åº”çš„ choices[item].value çš„é…ç½®ï¼Œå°±å¯ä»¥å®Œæˆå¯¹ `init` å‘½ä»¤çš„å®šåˆ¶åŒ–æ”¹é€ ï¼Œä»¥ç¬¦åˆå¼€å‘è€…çš„å›¢é˜Ÿå®é™…éœ€æ±‚ã€‚



### ä¿®æ”¹ bin name

bin name æ˜¯ cli å·¥å…·åœ¨ä½¿ç”¨è€…æœ¬åœ°ç¯å¢ƒå‘½ä»¤è¡Œä¸­è§¦å‘å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ package.json ä¸­çš„ bin è¿›è¡Œä¿®æ”¹æ¥å®ç°è‡ªå®šä¹‰
